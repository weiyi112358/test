@{
    ViewBag.Title = "公共优惠券管理";   
}

<div class="row-fluid heading">
    <div class="pull-left">
        <h3>公共优惠券管理</h3>
    </div>
    @*<div class="pull-right">
        <button class="btn" onclick="add()">新建条目</button>&nbsp;
    </div>*@
</div>

<div class="form-inline  well">
    <label>批号</label>
    <input type="text" id="txtBatchNo" class="input-medium">

    <label>模板</label>
    <select id="drpTempletID" class="span2">
    </select>
    <label>模板名称</label>
    <input type="text" id="txtTempletName" class="input-medium">
    <label>是否启用</label>
    <select id="status" class="span2">
        <option value="2">全部</option>
        <option value="1">是</option>
        <option value="0">否</option>
    </select>


    <label class="ml10" id="labstore">群组</label>
    <select id="drpStoreClass" class="span2">
    </select>
    <button id="btnSearch" class="btn">查询</button>
    <button class="btn" id="btnAdd" onclick="add()">新建</button>&nbsp;
</div>

<div class="row-fluid">
    <table class="table" data-provides="rowlink" id="dt_CouponData">
    </table>
</div>
<input type="hidden" id="hnBatchNo" />
<!--修改条目信息弹窗页-->
<div class="hide">
    <div id="editStore_dialog" class="cbox_content" style="width: 800px; height: 450px">

        <div class="row-fluid heading">
            <div class="pull-left">
                <h3>公共优惠券</h3>
            </div>
        </div>
        @using (Ajax.BeginForm(null, null, new AjaxOptions { }, new { id = "frmEditStore" }))
        {
            
            <div class="row-fluid">
                <table class="table" data-provides="rowlink" id="dt_CouponDetailData">
                </table>
            </div>
        }
    </div>
</div>

<!--新建条目弹窗页-->
<div class="hide">
    <div id="addStore_dialog" class="cbox_content" style="width: 500px">

        <div class="row-fluid heading">
            <div class="pull-left">
                <h3>新建公共优惠券</h3>
            </div>
        </div>
        @using (Ajax.BeginForm(null, null, new AjaxOptions { }, new { id = "frmAddCoupon" }))
        {
            <div class="formSep">
                <div class="row-fluid sepH_b">
                    <div class="span3 title-left">
                        优惠券模板
                    </div>
                    <select id="addTempletID" name="addTempletID" class="span5">
                    </select>
                    <span class="error-block"></span>
                </div>
                <div class="row-fluid sepH_b">
                    <div class="span3 title-left">
                        前缀
                    </div>
                    <input type="text" id="addPrefix" name="addPrefix" class="span5" onkeyup="value=value.replace(/[0oO]/g,'')" />
                    <span class="error-block"></span>
                </div>
                @*<div class="row-fluid sepH_b">
                    <div class="span3 title-left">
                        后缀
                    </div>
                    <input type="text" id="addAfterfix" name="addAfterfix" class="span5" />
                    <span class="error-block"></span>
                </div>*@
                <div class="row-fluid sepH_b">
                    <div class="span3 title-left">
                        随机数长度
                    </div>
                    <input type="text" id="addCouponLength" name="addCouponLength" class="span5" value="5" disabled="disabled" />
                    <span class="error-block"></span>
                </div>
                <div class="row-fluid sepH_b">
                    <div class="span3 title-left">
                        数量
                    </div>
                    <input type="text" id="addCouponCounts" name="addCouponCounts" class="span5" maxlength="5" />
                    <span class="error-block"></span>
                </div>

            </div>
            <div class="row-fluid">
                <div class="pull-right">
                    <button type="button" id="btnAddCancel" class="btn" onclick="$.colorbox.close();">取消</button>&nbsp;
                            <button type="submit" id="btnAddSave" class="btn btn-info sepV_a">保存</button>&nbsp;
                </div>
            </div>
        }
    </div>
</div>
<form id="exportForm" method="post">
    <input type="hidden" id="exprBatchNo" name="exprBatchNo" />
</form>


@section Scripts{
    @System.Web.Optimization.Scripts.Render("~/Gebo/lib/validation/jquery.validate.js", "~/Scripts/Framework/jquery.validate.extend.js")
    @System.Web.Optimization.Scripts.Render("~/Scripts/Pages/BaseData/PublicCoupon.js")
}
